{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
	<h1 class="mb-3">All Posts</h1>
	{% if posts %}
		<div class="row g-3">
				{% for p in posts %}
				<div class="col-12 col-md-6 col-lg-4">
					<div class="card h-100">
						<div class="card-body d-flex flex-column">
							<h5 class="card-title">{{ p.title|default:"(No title)" }}</h5>
							<p class="card-text mb-3">{{ p.body|truncatechars:200 }}</p>
							<div class="mt-auto">
								<p class="mb-1">
									<strong>Tags:</strong>
									{% if p.tags %}
										{% for t in p.tags %}
											<span class="badge bg-secondary me-1">{{ t }}</span>
										{% endfor %}
									{% else %}
										<span class="text-muted">None</span>
									{% endif %}
								</p>
								<p class="mb-1">
									<strong>Reactions:</strong>
									{% if p.reactions %}
										Likes: {{ p.reactions.likes|default:0 }} &middot; Dislikes: {{ p.reactions.dislikes|default:0 }}
									{% else %}
										<span class="text-muted">No reactions</span>
									{% endif %}
								</p>
								<p class="mb-0"><strong>Views:</strong> {{ p.views|default:0 }} &middot; <strong>Author:</strong> {{ p.userId|default:'-' }}</p>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	{% else %}
		<div class="alert alert-info">No posts available.</div>
	{% endif %}
</div>
{% endblock %}


